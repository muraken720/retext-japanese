!function(b,a){typeof exports==='object'&&typeof module!=='undefined'?module.exports=b():typeof define==='function'&&define.amd?define([],b):(typeof window!=='undefined'?a=window:typeof global!=='undefined'?a=global:typeof self!=='undefined'?a=self:a=this,a.retextJapanese=b())}(function(){var a;return function a(b,c,e){function f(d,k){if(!c[d]){if(!b[d]){var i=typeof require=='function'&&require;if(!k&&i)return i(d,!0);if(g)return g(d,!0);var j=new Error("Cannot find module '"+d+"'");throw j.code='MODULE_NOT_FOUND',j}var h=c[d]={exports:{}};b[d][0].call(h.exports,function(c){var a=b[d][1][c];return f(a?a:c)},h,h.exports,a,b,c,e)}return c[d].exports}var g=typeof require=='function'&&require;for(var d=0;d<e.length;d++)f(e[d]);return f}({1:[function(b,j,k){'use strict';function i(i,b){return b&&!b.position&&(a.prototype.position=!1),i.Parser=a,function i(o,q,n){function p(c){var a=j.createParentNode('Word');b&&b.pos&&(a.data=c);var d=j.createTextNode('Text',c.surface_form);return j.add(d,a),a}function k(d,c){var a=j.createTextNode(d,c.surface_form);return b&&b.pos&&(a.data=c),a}var j=new a,l=0,m='node_modules/retext-japanese/node_modules/kuromoji/dist/dict/';b&&b.dicDir&&(m=b.dicDir),h.builder({dicPath:m}).build(function(b,h){b&&(console.log(b),n());var a=0;c(o,'ParagraphNode',function(i){if(a++,j.line=a,j.column=1,i.children.length!==2)return;var o=i.children;i.children=[];var c=j.createParentNode('Sentence'),n=h.tokenize(o[0].value);for(var m=0;m<n.length;m++){var b=n[m];m===0&&j.add(c,i),b.pos_detail_1===f?j.add(k('WhiteSpace',b),c):b.pos_detail_1===e?(l++,j.add(k('Punctuation',b),c)):b.pos_detail_1===d?(l--,j.add(k('Punctuation',b),c)):b.pos_detail_1===g?(j.add(k('Punctuation',b),c),!l&&m!==n.length-1&&(c=j.createParentNode('Sentence'),j.add(c,i))):b.pos==='記号'&&b.pos_detail_1==='一般'?j.add(k('Punctuation',b),c):j.add(p(b),c)}j.add(o[1],i)}),n()})}}var a=b('parse-japanese-basic'),c=b('unist-util-visit'),h=b('kuromoji'),e='括弧開',d='括弧閉',g='句点',f='空白';j.exports=i},{kuromoji:11,'parse-japanese-basic':24,'unist-util-visit':27}],2:[function(b,g,h){"use strict";function a(a){this.token_info_dictionary=a.token_info_dictionary,this.unknown_dictionary=a.unknown_dictionary,this.viterbi_builder=new c(a),this.viterbi_searcher=new d(a.connection_costs),this.formatter=new e}var c=b('./viterbi/ViterbiBuilder.js'),d=b('./viterbi/ViterbiSearcher.js'),e=b('./util/IpadicFormatter.js'),f=/、|。/;a.splitByPunctuation=function(d){var b=[],a=d;while(!0){if(a==='')break;var c=a.search(f);if(c<0){b.push(a);break}b.push(a.substring(0,c+1)),a=a.substring(c+1)}return b},a.prototype.tokenize=function(f){var c=a.splitByPunctuation(f),d=[];for(var b=0;b<c.length;b++){var e=c[b];this.tokenizeForSentence(e,d)}return d},a.prototype.tokenizeForSentence=function(i,d){d==null&&(d=[]);var h=this.getLattice(i),g=this.viterbi_searcher.search(h);for(var e=0;e<g.length;e++){var a=g[e],f,b,c;a.type==='KNOWN'?(c=this.token_info_dictionary.getFeatures(a.name),c==null?b=[]:b=c.split(','),f=this.formatter.formatEntry(a.name,a.start_pos,a.type,b)):a.type==='UNKNOWN'?(c=this.unknown_dictionary.getFeatures(a.name),c==null?b=[]:b=c.split(','),f=this.formatter.formatUnknownEntry(a.name,a.start_pos,a.type,b,a.surface_form)):f=this.formatter.formatEntry(a.name,a.start_pos,a.type,[]),d.push(f)}return d},a.prototype.getLattice=function(a){return this.viterbi_builder.build(a)},g.exports=a},{'./util/IpadicFormatter.js':15,'./viterbi/ViterbiBuilder.js':17,'./viterbi/ViterbiSearcher.js':20}],3:[function(a,e,f){"use strict";function b(a){a.dicPath!=null?this.dic_path=a.dicPath:this.dic_path='dict/'}var c=a('./Tokenizer.js'),d=a('./loader/DictionaryLoader.js');b.prototype.build=function(b){var a=d.getLoader(this.dic_path);a.load(function(a,d){b(a,new c(d))})},e.exports=b},{'./Tokenizer.js':2,'./loader/DictionaryLoader.js':12}],4:[function(c,a,d){"use strict";function b(a,b,c,d,e){this.class_id=a,this.class_name=b,this.is_always_invoke=c,this.is_grouping=d,this.max_length=e}a.exports=b},{}],5:[function(d,k,l){"use strict";function a(){this.character_category_map=new Uint8Array(65536),this.compatible_category_map=new Uint32Array(65536),this.invoke_definition_map=null}var c=d('./InvokeDefinitionMap.js'),e=d('./CharacterClass.js'),h=d('../util/SurrogateAwareString.js'),b='DEFAULT',j=/\r|\n|\r\n/,g=/^(\w+)\s+(\d)\s+(\d)\s+(\d)/,f=/^(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/,i=/^(0x[0-9A-F]{4})\.\.(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/;a.load=function(d,e,f){var b=new a;return b.character_category_map=d,b.compatible_category_map=e,b.invoke_definition_map=c.load(f),b},a.readCharacterDefinition=function(t){var m=t.split(j),d,e=[],h=[];for(var k=0;k<m.length;k++){if(d=m[k],d==null)continue;var l=g.exec(d);if(l!=null){var q=e.length,p=a.parseCharCategory(q,l);if(p==null)continue;e.push(p);continue}var o=f.exec(d);if(o!=null){var r=a.parseCategoryMapping(o);h.push(r)}var n=i.exec(d);if(n!=null){var s=a.parseRangeCategoryMapping(n);h.push(s)}}var b=new a;return b.invoke_definition_map=new c,b.invoke_definition_map.init(e),b.initCategoryMappings(h),b},a.parseCharCategory=function(i,d){var f=d[1],a=parseInt(d[2]),b=parseInt(d[3]),c=parseInt(d[4]);if(!isFinite(a)||a!==0&&a!==1)return console.log('char.def parse error. INVOKE is 0 or 1 in:'+a),null;if(!isFinite(b)||b!==0&&b!==1)return console.log('char.def parse error. GROUP is 0 or 1 in:'+b),null;if(!isFinite(c)||c<0)return console.log('char.def parse error. LENGTH is 1 to n:'+c),null;var g=a===1,h=b===1;return new e(i,f,g,h,c)},a.parseCategoryMapping=function(b){var a=parseInt(b[1]),c=b[2],d=3<b.length?b.slice(3):[];return(!isFinite(a)||a<0||a>65535)&&console.log('char.def parse error. CODE is invalid:'+a),{start:a,default:c,compatible:d}},a.parseRangeCategoryMapping=function(c){var a=parseInt(c[1]),b=parseInt(c[2]),d=c[3],e=4<c.length?c.slice(4):[];return(!isFinite(a)||a<0||a>65535)&&console.log('char.def parse error. CODE is invalid:'+a),(!isFinite(b)||b<0||b>65535)&&console.log('char.def parse error. CODE is invalid:'+b),{start:a,end:b,default:d,compatible:e}},a.prototype.initCategoryMappings=function(h){var a;if(h!=null)for(var e=0;e<h.length;e++){var c=h[e],k=c.end||c.start;for(a=c.start;a<=k;a++){this.character_category_map[a]=this.invoke_definition_map.lookup(c.default);for(var d=0;d<c.compatible.length;d++){var i=this.compatible_category_map[a],j=c.compatible[d];if(j==null)continue;var g=this.invoke_definition_map.lookup(j);if(g==null)continue;var l=1<<g;i|=l,this.compatible_category_map[a]=i}}}var f=this.invoke_definition_map.lookup(b);if(f==null)return;for(a=0;a<this.character_category_map.length;a++)this.character_category_map[a]===0&&(this.character_category_map[a]=1<<f)},a.prototype.lookupCompatibleCategory=function(f){var b=[],d=f.charCodeAt(0),c;if(d<this.compatible_category_map.length&&(c=this.compatible_category_map[d]),c==null||c===0)return b;for(var a=0;a<32;a++)if(c<<31-a>>>31===1){var e=this.invoke_definition_map.getCharacterClass(a);if(e==null)continue;b.push(e)}return b},a.prototype.lookup=function(d){var a,c=d.charCodeAt(0);return h.isSurrogatePair(d)?a=this.invoke_definition_map.lookup(b):c<this.character_category_map.length&&(a=this.character_category_map[c]),a==null&&(a=this.invoke_definition_map.lookup(b)),this.invoke_definition_map.getCharacterClass(a)},k.exports=a},{'../util/SurrogateAwareString.js':16,'./CharacterClass.js':4,'./InvokeDefinitionMap.js':8}],6:[function(c,b,d){"use strict";function a(a){this.dimension=0,this.buffer=new Int16Array(a)}a.prototype.put=function(a,c,d){isFinite(a)||console.log(a+' '+c+' '+d);var b=a*this.dimension+c;if(this.buffer.length<b+1)throw'ConnectionCosts buffer overflow';this.buffer[b]=d},a.prototype.get=function(b,c){var a=b*this.dimension+c;if(this.buffer.length<a+1)throw'ConnectionCosts buffer overflow';return this.buffer[a]},a.prototype.loadConnectionCosts=function(a){this.dimension=1316,this.buffer=a},a.build=function(i){var b=i.split(/\n/).map(function(a){return a.split(' ')}),d=b[0][1],e=new a(d*d);e.dimension=d;for(var c=1;c<b.length;c++){if(b[c].length<3)continue;var f=parseInt(b[c][0]),g=parseInt(b[c][1]),h=parseInt(b[c][2]);(f<0||g<0)&&console.log('Error in:'+b[c]),e.put(f,g,h)}return e},b.exports=a},{}],7:[function(b,g,h){"use strict";function a(a,b,g,h){a!=null?this.trie=a:this.trie=c.builder(0).build([{k:'',v:1}]),b!=null?this.token_info_dictionary=b:this.token_info_dictionary=new d,g!=null?this.connection_costs=g:this.connection_costs=new e(0),h!=null?this.unknown_dictionary=h:this.unknown_dictionary=new f}var c=b('doublearray'),d=b('./TokenInfoDictionary.js'),e=b('./ConnectionCosts.js'),f=b('./UnknownDictionary.js');a.prototype.loadTrie=function(a,b){return this.trie=c.load(a,b),this},a.prototype.loadTokenInfoDictionaries=function(a,b,c){return this.token_info_dictionary.loadDictionary(a),this.token_info_dictionary.loadPosVector(b),this.token_info_dictionary.loadTargetMap(c),this},a.prototype.loadConnectionCosts=function(a){return this.connection_costs.loadConnectionCosts(a),this},a.prototype.loadUnknownDictionaries=function(a,b,c,d,e,f){return this.unknown_dictionary.loadUnknownDictionaries(a,b,c,d,e,f),this},g.exports=a},{'./ConnectionCosts.js':6,'./TokenInfoDictionary.js':9,'./UnknownDictionary.js':10,doublearray:22}],8:[function(c,e,f){"use strict";function a(){this.map=[],this.lookup_table={}}var b=c('../util/ByteBuffer.js'),d=c('./CharacterClass.js');a.load=function(l){var f=new a,e=[],c=new b(l);while(c.position+1<c.size()){var g=e.length,h=c.get(),i=c.get(),j=c.getInt(),k=c.getString();e.push(new d(g,k,h,i,j))}return f.init(e),f},a.prototype.init=function(b){if(b==null)return;for(var a=0;a<b.length;a++){var c=b[a];this.map[a]=c,this.lookup_table[c.class_name]=a}},a.prototype.getCharacterClass=function(a){return this.map[a]},a.prototype.lookup=function(b){var a=this.lookup_table[b];return a==null?null:a},a.prototype.toBuffer=function(){var a=new b;for(var d=0;d<this.map.length;d++){var c=this.map[d];a.put(c.is_always_invoke),a.put(c.is_grouping),a.putInt(c.max_length),a.putString(c.class_name)}return a.shrink(),a.buffer},e.exports=a},{'../util/ByteBuffer.js':13,'./CharacterClass.js':4}],9:[function(c,d,e){"use strict";function a(){this.dictionary=new b(10485760),this.target_map={},this.pos_buffer=new b(10485760)}var b=c('../util/ByteBuffer.js');a.prototype.buildDictionary=function(h){var d={};for(var b=0;b<h.length;b++){var a=h[b];if(a.length<4)continue;var c=a[0],e=a[1],f=a[2],g=a[3],j=a.slice(4).join(',');isFinite(e)&&isFinite(f)&&isFinite(g)||console.log(a);var i=this.put(e,f,g,c,j);d[i]=c}return this.dictionary.shrink(),this.pos_buffer.shrink(),d},a.prototype.put=function(c,d,e,f,g){var a=this.dictionary.position,b=this.pos_buffer.position;return this.dictionary.putShort(c),this.dictionary.putShort(d),this.dictionary.putShort(e),this.dictionary.putInt(b),this.pos_buffer.putString(f+','+g),a},a.prototype.addMapping=function(b,c){var a=this.target_map[b];a==null&&(a=[]),a.push(c),this.target_map[b]=a},a.prototype.targetMapToBuffer=function(){var a=new b,f=Object.keys(this.target_map).length;a.putInt(f);for(var e in this.target_map){var c=this.target_map[e],g=c.length;a.putInt(parseInt(e)),a.putInt(g);for(var d=0;d<c.length;d++)a.putInt(c[d])}return a.shrink()},a.prototype.loadDictionary=function(a){return this.dictionary=new b(a),this},a.prototype.loadPosVector=function(a){return this.pos_buffer=new b(a),this},a.prototype.loadTargetMap=function(g){var a=new b(g);a.position=0,this.target_map={},a.readInt();while(!0){if(a.buffer.length<a.position+1)break;var d=a.readInt(),e=a.readInt();for(var c=0;c<e;c++){var f=a.readInt();this.addMapping(d,f)}}return this},a.prototype.getFeatures=function(c){var a=parseInt(c);if(isNaN(a))return'';var b=this.dictionary.getInt(a+6);return this.pos_buffer.getString(b)},d.exports=a},{'../util/ByteBuffer.js':13}],10:[function(b,f,g){"use strict";function a(){this.dictionary=new c(10485760),this.target_map={},this.pos_buffer=new c(10485760),this.character_definition=null}var d=b('./TokenInfoDictionary.js'),e=b('./CharacterDefinition.js'),c=b('../util/ByteBuffer.js');a.prototype=Object.create(d.prototype),a.prototype.characterDefinition=function(a){return this.character_definition=a,this},a.prototype.lookup=function(a){return this.character_definition.lookup(a)},a.prototype.lookupCompatibleCategory=function(a){return this.character_definition.lookupCompatibleCategory(a)},a.prototype.loadUnknownDictionaries=function(a,b,c,d,f,g){this.loadDictionary(a),this.loadPosVector(b),this.loadTargetMap(c),this.character_definition=e.load(d,f,g)},f.exports=a},{'../util/ByteBuffer.js':13,'./CharacterDefinition.js':5,'./TokenInfoDictionary.js':9}],11:[function(b,e,f){"use strict";var c=b('./TokenizerBuilder.js'),d=b('./util/DictionaryBuilder.js'),a={builder:function(a){return new c(a)},dictionaryBuilder:function(){return new d}};typeof window==='undefined'?e.exports=a:window.kuromoji=a},{'./TokenizerBuilder.js':3,'./util/DictionaryBuilder.js':14}],12:[function(c,k,l){"use strict";function a(a){this.dic=new h,this.dic_path=a}function f(b){a.apply(this,[b])}function d(b){a.apply(this,[b])}var b=c('async'),g=c('zlibjs/bin/gunzip.min.js'),h=c('../dict/DynamicDictionaries.js'),i,j,e;typeof window==='undefined'?(i=c('fs'),j=c('zlib'),e=!1):e=!0,a.getLoader=function(a){return e?new f(a):new d(a)},a.prototype.load=function(e){var a=this.dic,c=this.dic_path,d=this.loadArrayBuffer;b.parallel([function(e){b.map(['base.dat.gz','check.dat.gz'],function(a,b){d(c+a,function(c,a){b(null,a)})},function(f,b){var c=new Int32Array(b[0]),d=new Int32Array(b[1]);a.loadTrie(c,d),e(null)})},function(e){b.map(['tid.dat.gz','tid_pos.dat.gz','tid_map.dat.gz'],function(a,b){d(c+a,function(c,a){b(null,a)})},function(g,b){var c=new Uint8Array(b[0]),d=new Uint8Array(b[1]),f=new Uint8Array(b[2]);a.loadTokenInfoDictionaries(c,d,f),e(null)})},function(b){d(c+'cc.dat.gz',function(e,d){var c=new Int16Array(d);a.loadConnectionCosts(c),b(null)})},function(e){b.map(['unk.dat.gz','unk_pos.dat.gz','unk_map.dat.gz','unk_char.dat.gz','unk_compat.dat.gz','unk_invoke.dat.gz'],function(a,b){d(c+a,function(c,a){b(null,a)})},function(j,b){var c=new Uint8Array(b[0]),d=new Uint8Array(b[1]),f=new Uint8Array(b[2]),g=new Uint8Array(b[3]),h=new Uint32Array(b[4]),i=new Uint8Array(b[5]);a.loadUnknownDictionaries(c,d,f,g,h,i),e(null)})}],function(b){e(b,a)})},f.prototype=Object.create(a.prototype),f.prototype.loadArrayBuffer=function(c,b){var a=new XMLHttpRequest;a.open('GET',c,!0),a.responseType='arraybuffer',a.onload=function(){this.status!==200&&b(a.statusText,null);var c=this.response,d=new g.Zlib.Gunzip(new Uint8Array(c)),e=d.decompress();b(null,e.buffer)},a.onerror=function(a){b(a,null)},a.send()},d.prototype=Object.create(a.prototype),d.prototype.loadArrayBuffer=function(a,b){i.readFile(a,function(c,a){j.gunzip(a,function(d,c){var a=new Uint8Array(c);b(null,a.buffer)})})},k.exports=a},{'../dict/DynamicDictionaries.js':7,async:21,fs:undefined,zlib:undefined,'zlibjs/bin/gunzip.min.js':23}],13:[function(e,d,f){"use strict";function a(a){var b;if(a==null)b=1048576;else if(typeof a==='number')b=a;else if(a instanceof Uint8Array){this.buffer=a,this.position=0;return}else throw typeof a+' is invalid parameter type for ByteBuffer constructor';this.buffer=new Uint8Array(b),this.position=0}var b=function(e){var b=new Uint8Array(e.length*4),f=0,c=0;while(f<e.length){var a,d=e.charCodeAt(f++);if(d>=55296&&d<=56319){var h=d,g=e.charCodeAt(f++);if(!(g>=56320&&g<=57343))return null;a=(h-55296)*1024+65536+(g-56320)}else a=d;a<128?b[c++]=a:a<2048?(b[c++]=a>>>6|192,b[c++]=a&63|128):a<65536?(b[c++]=a>>>12|224,b[c++]=a>>6&63|128,b[c++]=a&63|128):a<2097152&&(b[c++]=a>>>18|240,b[c++]=a>>12&63|128,b[c++]=a>>6&63|128,b[c++]=a&63|128)}return b.subarray(0,c)},c=function(c){var f='',b,d,e,g,h,i,j,a=0;while(a<c.length)d=c[a++],d<128?b=d:d>>5===6?(e=c[a++],b=(d&31)<<6|e&63):d>>4===14?(e=c[a++],g=c[a++],b=(d&15)<<12|(e&63)<<6|g&63):(e=c[a++],g=c[a++],h=c[a++],b=(d&7)<<18|(e&63)<<12|(g&63)<<6|h&63),b<65536?f+=String.fromCharCode(b):(b-=65536,i=55296|b>>10,j=56320|b&1023,f+=String.fromCharCode(i,j));return f};a.prototype.size=function(){return this.buffer.length},a.prototype.reallocate=function(){var a=new Uint8Array(this.buffer.length*2);a.set(this.buffer),this.buffer=a},a.prototype.shrink=function(){return this.buffer=this.buffer.subarray(0,this.position),this.buffer},a.prototype.put=function(a){this.buffer.length<this.position+1&&this.reallocate(),this.buffer[this.position++]=a},a.prototype.get=function(a){return a==null&&(a=this.position,this.position+=1),this.buffer.length<a+1?0:this.buffer[a]},a.prototype.putShort=function(a){if(65535<a)throw a+' is over short value';var b=255&a,c=(65280&a)>>8;this.put(b),this.put(c)},a.prototype.getShort=function(a){if(a==null&&(a=this.position,this.position+=2),this.buffer.length<a+2)return 0;var b=this.buffer[a],c=this.buffer[a+1];return(c<<8)+b},a.prototype.putInt=function(a){if(4294967295<a)throw a+' is over integer value';var b=255&a,c=(65280&a)>>8,d=(16711680&a)>>16,e=(4278190080&a)>>24;this.put(b),this.put(c),this.put(d),this.put(e)},a.prototype.getInt=function(a){if(a==null&&(a=this.position,this.position+=4),this.buffer.length<a+4)return 0;var b=this.buffer[a],c=this.buffer[a+1],d=this.buffer[a+2],e=this.buffer[a+3];return(e<<24)+(d<<16)+(c<<8)+b},a.prototype.readInt=function(){var a=this.position;return this.position+=4,this.getInt(a)},a.prototype.putString=function(d){var c=b(d);for(var a=0;a<c.length;a++)this.put(c[a]);this.put(0)},a.prototype.getString=function(a){var b=[],d;a==null&&(a=this.position);while(!0){if(this.buffer.length<a+1)break;if(d=this.get(a++),d===0)break;b.push(d)}return this.position=a,c(b)},d.exports=a},{}],14:[function(b,i,j){"use strict";function a(){this.tid_entries=[],this.unk_entries=[],this.matrix_text='0 0',this.char_text=''}var c=b('doublearray'),g=b('../dict/DynamicDictionaries.js'),h=b('../dict/TokenInfoDictionary.js'),d=b('../dict/ConnectionCosts.js'),f=b('../dict/UnknownDictionary.js'),e=b('../dict/CharacterDefinition.js');a.prototype.addTokenInfoDictionary=function(b){var a=b.split(/\n/).map(function(a){return a.split(',')});return this.tid_entries=this.tid_entries.concat(a),this},a.prototype.costMatrix=function(a){return this.matrix_text=a,this},a.prototype.charDef=function(a){return this.char_text=a,this},a.prototype.unkDef=function(a){return this.unk_entries=a.split(/\n/).map(function(a){return a.split(',')}),this},a.prototype.build=function(){var a=this.buildTokenInfoDictionary(),b=this.buildConnectionCosts(),c=this.buildUnknownDictionary();return new g(a.trie,a.token_info_dictionary,b,c)},a.prototype.buildTokenInfoDictionary=function(){var a=new h,b=a.buildDictionary(this.tid_entries),c=this.buildDoubleArray();for(var d in b){var e=b[d],f=c.lookup(e);a.addMapping(f,d)}return{trie:c,token_info_dictionary:a}},a.prototype.buildUnknownDictionary=function(){var a=new f,b=a.buildDictionary(this.unk_entries),c=e.readCharacterDefinition(this.char_text);a.characterDefinition(c);for(var d in b){var g=b[d],h=c.invoke_definition_map.lookup(g);a.addMapping(h,d)}return a},a.prototype.buildConnectionCosts=function(){return d.build(this.matrix_text)},a.prototype.buildDoubleArray=function(){var a=0,b=this.tid_entries.map(function(c){var b=c[0];return{k:b,v:a++}}),d=c.builder(1048576);return d.build(b)},i.exports=a},{'../dict/CharacterDefinition.js':5,'../dict/ConnectionCosts.js':6,'../dict/DynamicDictionaries.js':7,'../dict/TokenInfoDictionary.js':9,'../dict/UnknownDictionary.js':10,doublearray:22}],15:[function(c,b,d){"use strict";function a(){}a.prototype.formatEntry=function(c,d,e,b){var a={};return a.word_id=c,a.word_type=e,a.word_position=d,a.surface_form=b[0],a.pos=b[1],a.pos_detail_1=b[2],a.pos_detail_2=b[3],a.pos_detail_3=b[4],a.conjugated_type=b[5],a.conjugated_form=b[6],a.basic_form=b[7],a.reading=b[8],a.pronunciation=b[9],a},a.prototype.formatUnknownEntry=function(c,d,e,b,f){var a={};return a.word_id=c,a.word_type=e,a.word_position=d,a.surface_form=f,a.pos=b[1],a.pos_detail_1=b[2],a.pos_detail_2=b[3],a.pos_detail_3=b[4],a.conjugated_type=b[5],a.conjugated_form=b[6],a.basic_form=b[7],a},b.exports=a},{}],16:[function(c,b,d){"use strict";function a(c){this.str=c,this.index_mapping=[];for(var b=0;b<c.length;b++){var d=c.charAt(b);this.index_mapping.push(b),a.isSurrogatePair(d)&&b++}this.length=this.index_mapping.length}a.prototype.slice=function(a){if(this.index_mapping.length<=a)return'';var b=this.index_mapping[a];return this.str.slice(b)},a.prototype.charAt=function(a){if(this.str.length<=a)return'';var b=this.index_mapping[a],c=this.index_mapping[a+1];return c==null?this.str.slice(b):this.str.slice(b,c)},a.prototype.charCodeAt=function(d){if(this.index_mapping.length<=d)return NaN;var b=this.index_mapping[d],a=this.str.charCodeAt(b),c;return a>=55296&&a<=56319&&b<this.str.length&&(c=this.str.charCodeAt(b+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a},a.prototype.toString=function(){return this.str},a.isSurrogatePair=function(b){var a=b.charCodeAt(0);return a>=55296&&a<=56319?!0:!1},b.exports=a},{}],17:[function(b,f,g){"use strict";function d(a){this.trie=a.trie,this.token_info_dictionary=a.token_info_dictionary,this.unknown_dictionary=a.unknown_dictionary}var c=b('./ViterbiNode.js'),e=b('./ViterbiLattice.js'),a=b('../util/SurrogateAwareString.js');d.prototype.build=function(A){var k=new e,v=new a(A),b,z,q,n,m;for(var f=0;f<v.length;f++){var u=v.slice(f),d=this.trie.commonPrefixSearch(u);for(var g=0;g<d.length;g++){z=d[g].v,b=d[g].k;var s=this.token_info_dictionary.target_map[z];for(var p=0;p<s.length;p++){var j=parseInt(s[p]);q=this.token_info_dictionary.dictionary.getShort(j),n=this.token_info_dictionary.dictionary.getShort(j+2),m=this.token_info_dictionary.dictionary.getShort(j+4),k.append(new c(j,m,f+1,b.length,'KNOWN',q,n,b))}}var i=new a(u),w=new a(i.charAt(0)),l=this.unknown_dictionary.lookup(w.toString());if(d==null||d.length===0||l.is_always_invoke===1){if(b=w,l.is_grouping===1&&1<i.length)for(var r=1;r<i.length;r++){var x=i.charAt(r),y=this.unknown_dictionary.lookup(x);if(l.class_name!==y.class_name)break;b+=x}var t=this.unknown_dictionary.target_map[l.class_id];for(var o=0;o<t.length;o++){var h=parseInt(t[o]);q=this.unknown_dictionary.dictionary.getShort(h),n=this.unknown_dictionary.dictionary.getShort(h+2),m=this.unknown_dictionary.dictionary.getShort(h+4),k.append(new c(h,m,f+1,b.length,'UNKNOWN',q,n,b.toString()))}}}return k.appendEos(),k},f.exports=d},{'../util/SurrogateAwareString.js':16,'./ViterbiLattice.js':18,'./ViterbiNode.js':19}],18:[function(c,d,e){"use strict";function a(){this.nodes_end_at=[],this.nodes_end_at[0]=[new b('BOS',0,0,0,'BOS',0,0)],this.eos_pos=1}var b=c('./ViterbiNode.js');a.prototype.append=function(c){var a=c.start_pos+c.length-1;this.eos_pos<a&&(this.eos_pos=a);var b=this.nodes_end_at[a];b==null&&(b=[]),b.push(c),this.nodes_end_at[a]=b},a.prototype.appendEos=function(){var a=this.nodes_end_at.length;this.eos_pos++,this.nodes_end_at[a]=[new b('EOS',0,this.eos_pos,0,'EOS',0,0)]},d.exports=a},{'./ViterbiNode.js':19}],19:[function(c,a,d){"use strict";function b(b,c,d,e,a,f,g,h){this.name=b,this.cost=c,this.start_pos=d,this.length=e,this.left_id=f,this.right_id=g,this.prev=null,this.surface_form=h,a==='BOS'?this.shortest_cost=0:this.shortest_cost=Number.MAX_VALUE,this.type=a}a.exports=b},{}],20:[function(c,b,d){"use strict";function a(a){this.connection_costs=a}a.prototype.search=function(a){return a=this.forward(a),this.backward(a)},a.prototype.forward=function(g){var c,d,e;for(c=1;c<=g.eos_pos;c++){var f=g.nodes_end_at[c];if(f==null)continue;for(d=0;d<f.length;d++){var a=f[d],h=Number.MAX_VALUE,l,i=g.nodes_end_at[a.start_pos-1];if(i==null)continue;for(e=0;e<i.length;e++){var b=i[e],k;a.left_id==null||b.right_id==null?(console.log('Left or right is null'),k=0):k=this.connection_costs.get(b.right_id,a.left_id);var j=b.shortest_cost+k+a.cost;j<h&&(l=b,h=j)}a.prev=l,a.shortest_cost=h}}return g},a.prototype.backward=function(c){var b=[],d=c.nodes_end_at[c.nodes_end_at.length-1][0],a=d.prev;if(a==null)return[];while(a.type!=='BOS'){if(b.push(a),a.prev==null)return[];a=a.prev}return b.reverse()},b.exports=a},{}],21:[function(c,b,d){(function(d,c){!function(e,G,p,L,k,K,n,r,C){function g(){}function j(a){return a}function J(a){return!!a}function q(a){return!a}function o(a){return function(){if(a===null)throw new Error('Callback was already called.');a.apply(this,arguments),a=null}}function l(a){return function(){if(a===null)return;a.apply(this,arguments),a=null}}function w(a){return k(a)||typeof a.length==='number'&&a.length>=0&&a.length%1===0}function T(a,b){return w(a)?h(a,b):R(a,b)}function h(b,d){var a=-1,c=b.length;while(++a<c)d(b[a],a,b)}function m(b,e){var a=-1,c=b.length,d=Array(c);while(++a<c)d[a]=e(b[a],a,b);return d}function M(a){return m(Array(a),function(b,a){return a})}function S(b,c,a){return h(b,function(b,d,e){a=c(a,b,d,e)}),a}function R(a,b){h(n(a),function(c){b(a[c],c)})}function H(b,c){for(var a=0;a<b.length;a++)if(b[a]===c)return a;return-1}function I(c){var a=-1,b,d;return w(c)?(b=c.length,function c(){return a++,a<b?a:null}):(d=n(c),b=d.length,function c(){return a++,a<b?d[a]:null})}function f(b,a){return a=a==null?b.length-1:+a,function(){var e=Math.max(arguments.length-a,0),d=Array(e);for(var c=0;c<e;c++)d[c]=arguments[c+a];switch(a){case 0:return b.call(this,d);case 1:return b.call(this,arguments[0],d)}}}function y(a){return function(b,d,c){return a(b,c)}}function s(a){return function(d,i,b){b=l(b||g),d=d||[];var h=I(d);if(a<=0)return b(null);var e=!1,c=0,f=!1;!function g(){if(e&&c<=0)return b(null);while(c<a&&!f){var j=h();if(j===null){e=!0,c<=0&&b(null);return}c+=1,i(d[j],j,o(function(a){c-=1,a?(b(a),f=!0):g()}))}}()}}function t(a){return function(b,c,d){return a(e.eachOf,b,c,d)}}function x(a){return function(b,c,d,e){return a(s(c),b,d,e)}}function u(a){return function(b,c,d){return a(e.eachOfSeries,b,c,d)}}function z(c,d,e,a){a=l(a||g);var b=[];c(d,function(a,c,d){e(a,function(a,e){b[c]=e,d(a)})},function(c){a(c,b)})}function v(b,c,d,e){var a=[];b(c,function(b,c,e){d(b,function(d){d&&a.push({index:c,value:b}),e()})},function(){e(m(a.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})}function B(a,b,c,d){v(a,b,function(a,b){c(a,function(a){b(!a)})},d)}function i(a,c,b){return function(f,g,e,d){function h(){d&&d(b(!1,void 0))}function i(a,g,f){if(!d)return f();e(a,function(g){d&&c(g)&&(d(b(!0,a)),d=e=!1),f()})}arguments.length>3?a(f,g,i,h):(d=e,e=g,a(f,i,h))}}function D(b,a){return a}function E(d,c,a){a=a||g;var b=w(c)?[]:{};d(c,function(a,c,d){a(f(function(e,a){a.length<=1&&(a=a[0]),b[c]=a,d(e)}))},function(c){a(c,b)})}function N(b,c,d,e){var a=[];b(c,function(b,e,c){d(b,function(b,d){a=a.concat(d||[]),c(b)})},function(b){e(b,a)})}function O(f,c,i){function d(a,b,d,c){if(c!=null&&typeof c!=='function')throw new Error('task callback must be a function');if(a.started=!0,k(b)||(b=[b]),b.length===0&&a.idle())return e.setImmediate(function(){a.drain()});h(b,function(e){var b={data:e,callback:c||g};d?a.tasks.unshift(b):a.tasks.push(b),a.tasks.length===a.concurrency&&a.saturated()}),e.setImmediate(a.process)}function j(a,c){return function(){b-=1;var d=arguments;h(c,function(a){a.callback.apply(a,d)}),a.tasks.length+b===0&&a.drain(),a.process()}}if(c==null)c=1;else if(c===0)throw new Error('Concurrency must not be zero');var b=0,a={tasks:[],concurrency:c,payload:i,saturated:g,empty:g,drain:g,started:!1,paused:!1,push:function(b,c){d(a,b,!1,c)},kill:function(){a.drain=g,a.tasks=[]},unshift:function(b,c){d(a,b,!0,c)},process:function(){if(!a.paused&&b<a.concurrency&&a.tasks.length)while(b<a.concurrency&&a.tasks.length){var c=a.payload?a.tasks.splice(0,a.payload):a.tasks.splice(0,a.tasks.length),d=m(c,function(a){return a.data});a.tasks.length===0&&a.empty(),b+=1;var e=o(j(a,c));f(d,e)}},length:function(){return a.tasks.length},running:function(){return b},idle:function(){return a.tasks.length+b===0},pause:function(){a.paused=!0},resume:function(){if(a.paused===!1)return;a.paused=!1;var c=Math.min(a.concurrency,a.tasks.length);for(var b=1;b<=c;b++)e.setImmediate(a.process)}};return a}function P(a){return f(function(b,c){b.apply(null,c.concat([f(function(b,c){typeof console==='object'&&(b?console.error&&console.error(b):console[a]&&h(c,function(b){console[a](b)}))})]))})}function Q(a){return function(b,c,d){a(M(b),c,d)}}function F(a){return f(function(d,c){var b=f(function(b){var c=this,e=b.pop();return a(d,function(a,e,d){a.apply(c,b.concat([d]))},e)});return c.length?b.apply(this,c):b})}function A(a){return f(function(b){var c=b.pop();b.push(function(){var a=arguments;d?e.setImmediate(function(){c.apply(null,a)}):c.apply(null,a)});var d=!0;a.apply(this,b),d=!1})}e={},p=typeof self==='object'&&self.self===self&&self||typeof c==='object'&&c.global===c&&c||this,p!=null&&(G=p.async),e.noConflict=function(){return p.async=G,e},L=Object.prototype.toString,k=Array.isArray||function(a){return L.call(a)==='[object Array]'},K=function(b){var a=typeof b;return a==='function'||a==='object'&&!!b},n=Object.keys||function(c){var a=[];for(var b in c)c.hasOwnProperty(b)&&a.push(b);return a},r=typeof setImmediate==='function'&&setImmediate,C=r?function(a){r(a)}:function(a){setTimeout(a,0)},typeof d==='object'&&typeof d.nextTick==='function'?e.nextTick=d.nextTick:e.nextTick=C,e.setImmediate=r?C:e.nextTick,e.forEach=e.each=function(a,b,c){return e.eachOf(a,y(b),c)},e.forEachSeries=e.eachSeries=function(a,b,c){return e.eachOfSeries(a,y(b),c)},e.forEachLimit=e.eachLimit=function(a,b,c,d){return s(b)(a,y(c),d)},e.forEachOf=e.eachOf=function(a,e,b){function f(a){a?b(a):(d+=1,d>=c&&b(null))}b=l(b||g),a=a||[];var c=w(a)?a.length:n(a).length,d=0;if(!c)return b(null);T(a,function(c,b){e(a[b],b,o(f))})},e.forEachOfSeries=e.eachOfSeries=function(c,h,b){function d(){var g=!0;if(a===null)return b(null);h(c[a],a,o(function(c){if(c)b(c);else{if(a=f(),a===null)return b(null);g?e.nextTick(d):d()}})),g=!1}b=l(b||g),c=c||[];var f=I(c),a=f();d()},e.forEachOfLimit=e.eachOfLimit=function(a,b,c,d){s(b)(a,c,d)},e.map=t(z),e.mapSeries=u(z),e.mapLimit=x(z),e.inject=e.foldl=e.reduce=function(b,a,c,d){e.eachOfSeries(b,function(b,e,d){c(a,b,function(b,c){a=c,d(b)})},function(b){d(b||null,a)})},e.foldr=e.reduceRight=function(b,c,d,f){var a=m(b,j).reverse();e.reduce(a,c,d,f)},e.select=e.filter=t(v),e.selectLimit=e.filterLimit=x(v),e.selectSeries=e.filterSeries=u(v),e.reject=t(B),e.rejectLimit=x(B),e.rejectSeries=u(B),e.any=e.some=i(e.eachOf,J,j),e.someLimit=i(e.eachOfLimit,J,j),e.all=e.every=i(e.eachOf,q,q),e.everyLimit=i(e.eachOfLimit,q,q),e.detect=i(e.eachOf,j,D),e.detectSeries=i(e.eachOfSeries,j,D),e.detectLimit=i(e.eachOfLimit,j,D),e.sortBy=function(b,c,a){function d(c,d){var a=c.criteria,b=d.criteria;return a<b?-1:a>b?1:0}e.map(b,function(a,b){c(a,function(c,d){c?b(c):b(null,{value:a,criteria:d})})},function(b,c){if(b)return a(b);a(null,m(c.sort(d),function(a){return a.value}))})},e.auto=function(b,c){function m(a){d.unshift(a)}function o(b){var a=H(d,b);a>=0&&d.splice(a,1)}function p(){i--,h(d.slice(0),function(a){a()})}c=l(c||g);var j=n(b),i=j.length;if(!i)return c(null);var a={},d=[];m(function(){i||c(null,a)}),h(j,function(d){function n(){return S(h,function(b,c){return b&&a.hasOwnProperty(c)},!0)&&!a.hasOwnProperty(d)}function q(){n()&&(o(q),g[g.length-1](i,a))}var g=k(b[d])?b[d]:[b[d]],i=f(function(g,b){if(b.length<=1&&(b=b[0]),g){var f={};R(a,function(a,b){f[b]=a}),f[d]=b,c(g,f)}else a[d]=b,e.setImmediate(p)}),h=g.slice(0,g.length-1),j=h.length,l;while(j--){if(!(l=b[h[j]]))throw new Error('Has inexistant dependency');if(k(l)&&H(l,d)>=0)throw new Error('Has cyclic dependencies')}n()?g[g.length-1](i,a):m(q)})},e.retry=function(c,g,i){function k(b,a){if(typeof a==='number')b.times=parseInt(a,10)||d;else if(typeof a==='object')b.times=parseInt(a.times,10)||d,b.interval=parseInt(a.interval,10)||h;else throw new Error("Unsupported argument type for 'times': "+typeof a)}function j(c,d){function g(a,b){return function(c){a(function(a,d){c(!a||b,{err:a,result:d})},d)}}function h(a){return function(b){setTimeout(function(){b(null)},a)}}while(a.times){var b=!(a.times-=1);f.push(g(a.task,b)),!b&&a.interval>0&&f.push(h(a.interval))}e.series(f,function(d,b){b=b[b.length-1],(c||a.callback)(b.err,b.result)})}var d=5,h=0,f=[],a={times:d,interval:h},b=arguments.length;if(b<1||b>3)throw new Error('Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)');return b<=2&&typeof c==='function'&&(i=g,g=c),typeof c!=='function'&&k(a,c),a.callback=i,a.task=g,a.callback?j():j},e.waterfall=function(b,a){function c(b){return f(function(f,d){if(f)a.apply(null,[f].concat(d));else{var e=b.next();e?d.push(c(e)):d.push(a),A(b).apply(null,d)}})}if(a=l(a||g),!k(b)){var d=new Error('First argument to waterfall must be an array of functions');return a(d)}if(!b.length)return a();c(e.iterator(b))()},e.parallel=function(a,b){E(e.eachOf,a,b)},e.parallelLimit=function(a,b,c){E(s(b),a,c)},e.series=function(a,b){E(e.eachOfSeries,a,b)},e.iterator=function(a){function b(c){function d(){return a.length&&a[c].apply(null,arguments),d.next()}return d.next=function(){return c<a.length-1?b(c+1):null},d}return b(0)},e.apply=f(function(a,b){return f(function(c){return a.apply(null,b.concat(c))})}),e.concat=t(N),e.concatSeries=u(N),e.whilst=function(c,d,a){if(a=a||g,c()){var b=f(function(e,f){e?a(e):c.apply(this,f)?d(b):a(null)});d(b)}else a(null)},e.doWhilst=function(b,c,d){var a=0;return e.whilst(function(){return++a<=1||c.apply(this,arguments)},b,d)},e.until=function(a,b,c){return e.whilst(function(){return!a.apply(this,arguments)},b,c)},e.doUntil=function(a,b,c){return e.doWhilst(a,function(){return!b.apply(this,arguments)},c)},e.during=function(c,e,a){a=a||g;var d=f(function(d,e){d?a(d):(e.push(b),c.apply(this,e))}),b=function(b,c){b?a(b):c?e(d):a(null)};c(b)},e.doDuring=function(b,c,d){var a=0;e.during(function(b){a++<1?b(null,!0):c.apply(this,arguments)},b,d)},e.queue=function(b,c){var a=O(function(a,c){b(a[0],c)},c,1);return a},e.priorityQueue=function(b,c){function d(a,b){return a.priority-b.priority}function f(d,e,f){var a=-1,b=d.length-1;while(a<b){var c=a+(b-a+1>>>1);f(e,d[c])>=0?a=c:b=c-1}return a}function i(a,b,i,c){if(c!=null&&typeof c!=='function')throw new Error('task callback must be a function');if(a.started=!0,k(b)||(b=[b]),b.length===0)return e.setImmediate(function(){a.drain()});h(b,function(h){var b={data:h,priority:i,callback:typeof c==='function'?c:g};a.tasks.splice(f(a.tasks,b,d)+1,0,b),a.tasks.length===a.concurrency&&a.saturated(),e.setImmediate(a.process)})}var a=e.queue(b,c);return a.push=function(b,c,d){i(a,b,c,d)},delete a.unshift,a},e.cargo=function(a,b){return O(a,1,b)},e.log=P('log'),e.dir=P('dir'),e.memoize=function(g,d){var b={},a={};d=d||j;var c=f(function c(j){var i=j.pop(),h=d.apply(null,j);h in b?e.nextTick(function(){i.apply(null,b[h])}):h in a?a[h].push(i):(a[h]=[i],g.apply(null,j.concat([f(function(e){b[h]=e;var d=a[h];delete a[h];for(var c=0,f=d.length;c<f;c++)d[c].apply(null,e)})])))});return c.memo=b,c.unmemoized=g,c},e.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},e.times=Q(e.map),e.timesSeries=Q(e.mapSeries),e.timesLimit=function(a,b,c,d){return e.mapLimit(M(a),b,c,d)},e.seq=function(){var a=arguments;return f(function(b){var d=this,c=b[b.length-1];typeof c=='function'?b.pop():c=g,e.reduce(a,b,function(a,b,c){b.apply(d,a.concat([f(function(a,b){c(a,b)})]))},function(a,b){c.apply(d,[a].concat(b))})})},e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))},e.applyEach=F(e.eachOf),e.applyEachSeries=F(e.eachOfSeries),e.forever=function(d,e){function a(d){if(d)return b(d);c(a)}var b=o(e||g),c=A(d);a()},e.ensureAsync=A,e.constant=f(function(b){var a=[null].concat(b);return function(b){return b.apply(this,a)}}),e.wrapSync=e.asyncify=function a(b){return f(function(d){var a=d.pop(),c;try{c=b.apply(this,d)}catch(b){return a(b)}K(c)&&typeof c.then==='function'?c.then(function(b){a(null,b)})['catch'](function(b){a(b.message?b:new Error(b))}):a(null,c)})},typeof b==='object'&&b.exports?b.exports=e:typeof a==='function'&&a.amd?a([],function(){return e}):p.async=e}()}.call(this,c('_process'),typeof global!=='undefined'?global:typeof self!=='undefined'?self:typeof window!=='undefined'?window:{}))},{_process:undefined}],22:[function(b,a,c){!function(i,h,b,c,j,k,l,o,r,m,f,q,g,p,n){"use strict";function e(a){this.bc=m(a),this.keys=[]}function d(a){this.bc=a,this.bc.shrink()}i=' ',h=0,b=0,c=-1,j=!0,k=!0,l=4,o=4,r=2,m=function(d){d==null&&(d=1024);var e=function(d,e,f){for(var b=e;b<f;b++)d[b]=-b+1;if(0<a.array[a.array.length-1]){var c=a.array.length-2;while(0<a.array[c])c--;d[e]=-c}},g=function(b,c,d){for(var a=c;a<d;a++)b[a]=-a-1},h=function(i){var b=i*r,d=f(c.signed,c.bytes,b);e(d,c.array.length,b),d.set(c.array),c.array=null,c.array=d;var h=f(a.signed,a.bytes,b);g(h,a.array.length,b),h.set(a.array),a.array=null,a.array=h},i=b+1,c={signed:j,bytes:l,array:f(j,l,d)},a={signed:k,bytes:o,array:f(k,o,d)};return c.array[b]=1,a.array[b]=b,e(c.array,b+1,c.array.length),g(a.array,b+1,a.array.length),{getBaseBuffer:function(){return c.array},getCheckBuffer:function(){return a.array},loadBaseBuffer:function(a){return c.array=a,this},loadCheckBuffer:function(b){return a.array=b,this},size:function(){return Math.max(c.array.length,a.array.length)},getBase:function(a){return c.array.length-1<a?-a+1:c.array[a]},getCheck:function(b){return a.array.length-1<b?-b-1:a.array[b]},setBase:function(a,b){c.array.length-1<a&&h(a),c.array[a]=b},setCheck:function(b,c){a.array.length-1<b&&h(b),a.array[b]=c},setFirstUnusedNode:function(a){i=a},getFirstUnusedNode:function(){return i},shrink:function(){var b=this.size()-1;while(!0){if(0<=a.array[b])break;b--}c.array=c.array.subarray(0,b+2),a.array=a.array.subarray(0,b+2)},calc:function(){var c=0,b=a.array.length;for(var d=0;d<b;d++)a.array[d]<0&&c++;return{all:b,unused:c,efficiency:(b-c)/b}},dump:function(){var d='',e='',b;for(b=0;b<c.array.length;b++)d=d+' '+this.getBase(b);for(b=0;b<a.array.length;b++)e=e+' '+this.getCheck(b);return console.log('base:'+d),console.log('chck:'+e),'base:'+d+' chck:'+e}}},e.prototype.append=function(a,b){return this.keys.push({k:a,v:b}),this},e.prototype.build=function(a,e){if(a==null&&(a=this.keys),a==null)return new d(this.bc);e==null&&(e=!1);var c=a.map(function(a){return{k:g(a.k+i),v:a.v}});return e?this.keys=c:this.keys=c.sort(function(e,f){var b=e.k,c=f.k,d=Math.min(b.length,c.length);for(var a=0;a<d;a++){if(b[a]===c[a])continue;return b[a]-c[a]}return b.length-c.length}),c=null,this._build(b,0,0,this.keys.length),new d(this.bc)},e.prototype._build=function(j,g,l,k){var a=this.getChildrenInfo(g,l,k),c=this.findAllocatableBase(a);this.setBC(j,a,c);for(var b=0;b<a.length;b+=3){var d=a[b];if(d===h)continue;var e=a[b+1],i=a[b+2],f=c+d;this._build(f,g+1,e,i)}},e.prototype.getChildrenInfo=function(h,d,i){var e=this.keys[d].k[h],b=0,a=new Int32Array(i*3);a[b++]=e,a[b++]=d;var c=d,f=d;for(;c<d+i;c++){var g=this.keys[c].k[h];e!==g&&(a[b++]=c-f,a[b++]=g,a[b++]=c,e=g,f=c)}return a[b++]=c-f,a=a.subarray(0,b),a},e.prototype.setBC=function(n,f,j){var a=this.bc;a.setBase(n,j);var c;for(c=0;c<f.length;c+=3){var g=f[c],b=j+g,i=-a.getBase(b),d=-a.getCheck(b);b!==a.getFirstUnusedNode()?a.setCheck(i,-d):a.setFirstUnusedNode(d),a.setBase(d,-i);var l=n;if(a.setCheck(b,l),g===h){var m=f[c+1],e=this.keys[m].v;e==null&&(e=0);var k=-e-1;a.setBase(b,k)}}},e.prototype.findAllocatableBase=function(e){var b=this.bc,c,a=b.getFirstUnusedNode();while(!0){if(c=a-e[0],c<0){a=-b.getCheck(a);continue}var f=!0;for(var d=0;d<e.length;d+=3){var g=e[d],h=c+g;if(!this.isUnusedNode(h)){a=-b.getCheck(a),f=!1;break}}if(f)return c}},e.prototype.isUnusedNode=function(a){var c=this.bc,d=c.getCheck(a);return a===b?!1:d<0?!0:!1},d.prototype.contain=function(h){var j=this.bc;h+=i;var e=g(h),f=b,a=c;for(var d=0;d<e.length;d++){var k=e[d];if(a=this.traverse(f,k),a===c)return!1;if(j.getBase(a)<=0)return!0;else{f=a;continue}}return!1},d.prototype.lookup=function(j){j+=i;var e=g(j),f=b,a=c;for(var d=0;d<e.length;d++){var k=e[d];if(a=this.traverse(f,k),a===c)return c;f=a}var h=this.bc.getBase(a);return h<=0?-h-1:c},d.prototype.commonPrefixSearch=function(n){var f=g(n),k=b,a=c,i=[];for(var d=0;d<f.length;d++){var m=f[d];if(a=this.traverse(k,m),a!==c){k=a;var l=this.traverse(a,h);if(l!==c){var j=this.bc.getBase(l),e={};j<=0&&(e.v=-j-1),e.k=p(q(f,0,d+1)),i.push(e)}continue}else break}return i},d.prototype.traverse=function(b,d){var a=this.bc.getBase(b)+d;return this.bc.getCheck(a)===b?a:c},d.prototype.size=function(){return this.bc.size()},d.prototype.calc=function(){return this.bc.calc()},d.prototype.dump=function(){return this.bc.dump()},f=function(c,b,a){if(c)switch(b){case 1:return new Int8Array(a);case 2:return new Int16Array(a);case 4:return new Int32Array(a);default:throw new RangeError('Invalid newArray parameter element_bytes:'+b)}else switch(b){case 1:return new Uint8Array(a);case 2:return new Uint16Array(a);case 4:return new Uint32Array(a);default:throw new RangeError('Invalid newArray parameter element_bytes:'+b)}},q=function(e,f,a){var c=new ArrayBuffer(a),b=new Uint8Array(c,0,a),d=e.subarray(f,a);return b.set(d),b},g=function(e){var b=new Uint8Array(new ArrayBuffer(e.length*4)),f=0,c=0;while(f<e.length){var a,d=e.charCodeAt(f++);if(d>=55296&&d<=56319){var h=d,g=e.charCodeAt(f++);if(!(g>=56320&&g<=57343))return null;a=(h-55296)*1024+65536+(g-56320)}else a=d;a<128?b[c++]=a:a<2048?(b[c++]=a>>>6|192,b[c++]=a&63|128):a<65536?(b[c++]=a>>>12|224,b[c++]=a>>6&63|128,b[c++]=a&63|128):a<2097152&&(b[c++]=a>>>18|240,b[c++]=a>>12&63|128,b[c++]=a>>6&63|128,b[c++]=a&63|128)}return b.subarray(0,c)},p=function(c){var f='',b,d,e,g,h,i,j,a=0;while(a<c.length)d=c[a++],d<128?b=d:d>>5===6?(e=c[a++],b=(d&31)<<6|e&63):d>>4===14?(e=c[a++],g=c[a++],b=(d&15)<<12|(e&63)<<6|g&63):(e=c[a++],g=c[a++],h=c[a++],b=(d&7)<<18|(e&63)<<12|(g&63)<<6|h&63),b<65536?f+=String.fromCharCode(b):(b-=65536,i=55296|b>>10,j=56320|b&1023,f+=String.fromCharCode(i,j));return f},n={builder:function(a){return new e(a)},load:function(b,c){var a=m(0);return a.loadBaseBuffer(b),a.loadCheckBuffer(c),new d(a)}},void 0===a?window.doublearray=n:a.exports=n}()},{}],23:[function(a,b,c){(function(){'use strict';function c(a){throw a}function j(f,e){var c=f.split('.'),a=J;!(c[0]in a)&&a.execScript&&a.execScript('var '+c[0]);for(var d;c.length&&(d=c.shift());)!c.length&&e!==b?a[d]=e:a=a[d]?a[d]:a[d]={}}function G(c,b,g){var a,d='number'===typeof b?b:b=0,e='number'===typeof g?g:c.length;for(a=-1,d=e&7;d--;++b)a=a>>>8^f[(a^c[b])&255];for(d=e>>3;d--;b+=8)a=a>>>8^f[(a^c[b])&255],a=a>>>8^f[(a^c[b+1])&255],a=a>>>8^f[(a^c[b+2])&255],a=a>>>8^f[(a^c[b+3])&255],a=a>>>8^f[(a^c[b+4])&255],a=a>>>8^f[(a^c[b+5])&255],a=a>>>8^f[(a^c[b+6])&255],a=a>>>8^f[(a^c[b+7])&255];return(a^4294967295)>>>0}function h(){}function l(f){var l=f.length,d=0,i=Number.POSITIVE_INFINITY,j,k,e,g,m,h,n,b,c,o;for(b=0;b<l;++b)f[b]>d&&(d=f[b]),f[b]<i&&(i=f[b]);for(j=1<<d,k=new(a?Uint32Array:Array)(j),e=1,g=0,m=2;e<=d;){for(b=0;b<l;++b)if(f[b]===e){for(h=0,n=g,c=0;c<e;++c)h=h<<1|n&1,n>>=1;for(o=e<<16|b,c=h;c<j;c+=m)k[c]=o;++g}++e,g<<=1,m<<=1}return[k,d,i]}function g(d,b){this.i=[],this.j=32768,this.d=this.f=this.c=this.n=0,this.input=a?new Uint8Array(d):d,this.o=!1,this.k=t,this.z=!1,(b||!(b={}))&&(b.index&&(this.c=b.index),b.bufferSize&&(this.j=b.bufferSize),b.bufferType&&(this.k=b.bufferType),b.resize&&(this.z=b.resize));switch(this.k){case E:this.a=32768;this.b=new(a?Uint8Array:Array)(32768+this.j+258);break;case t:this.a=0;this.b=new(a?Uint8Array:Array)(this.j);this.e=this.F;this.q=this.B;this.l=this.D;break;default:c(Error('invalid inflate mode'))}}function e(a,d){for(var e=a.f,b=a.d,g=a.input,f=a.c,h=g.length,i;b<d;)f>=h&&c(Error('input buffer is broken')),e|=g[f++]<<b,b+=8;return i=e&(1<<d)-1,a.f=e>>>d,a.d=b-d,a.c=f,i}function o(a,k){for(var d=a.f,b=a.d,f=a.input,c=a.c,j=f.length,i=k[0],h=k[1],e,g;b<h&&!(c>=j);)d|=f[c++]<<b,b+=8;return e=i[d&(1<<h)-1],g=e>>>16,a.f=d>>g,a.d=b-g,a.c=c,e&65535}function O(c){function j(g,h,d){var f,a=this.w,b,c;for(c=0;c<g;)switch(f=o(this,h),f){case 16:for(b=3+e(this,2);b--;)d[c++]=a;break;case 17:for(b=3+e(this,3);b--;)d[c++]=0;a=0;break;case 18:for(b=11+e(this,7);b--;)d[c++]=0;a=0;break;default:a=d[c++]=f}return this.w=a,d}var h=e(c,5)+257,g=e(c,5)+1,f=e(c,4)+4,d=new(a?Uint8Array:Array)(v.length),i,k,m,b;for(b=0;b<f;++b)d[v[b]]=e(c,3);if(!a)for(b=f,f=d.length;b<f;++b)d[v[b]]=0;i=l(d),k=new(a?Uint8Array:Array)(h),m=new(a?Uint8Array:Array)(g),c.w=0,c.l(l(j.call(c,h,i,k)),l(j.call(c,g,i,m)))}function n(a){this.input=a,this.c=0,this.m=[],this.s=!1}var b=void 0,J=this,a='undefined'!==typeof Uint8Array&&'undefined'!==typeof Uint16Array&&'undefined'!==typeof Uint32Array&&'undefined'!==typeof DataView;new(a?Uint8Array:Array)(256);var r;for(r=0;256>r;++r)for(var k=r,M=7,k=k>>>1;k;k>>>=1)--M;var F=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],f=a?new Uint32Array(F):F;h.prototype.getName=function(){return this.name},h.prototype.getData=function(){return this.data},h.prototype.H=function(){return this.I},j('Zlib.GunzipMember',h),j('Zlib.GunzipMember.prototype.getName',h.prototype.getName),j('Zlib.GunzipMember.prototype.getData',h.prototype.getData),j('Zlib.GunzipMember.prototype.getMtime',h.prototype.H);var m=[],d;for(d=0;288>d;d++)switch(!0){case 143>=d:m.push([d+48,8]);break;case 255>=d:m.push([d-144+400,9]);break;case 279>=d:m.push([d-256+0,7]);break;case 287>=d:m.push([d-280+192,8]);break;default:c('invalid literal: '+d)}var H=function(d,a,b){function e(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:c('invalid length: '+a)}}for(d=[],a=3;258>=a;a++)b=e(a),d[a]=b[2]<<24|b[1]<<16|b[0];return d}();a&&new Uint32Array(H);var E=0,t=1;g.prototype.g=function(){for(;!this.o;){var k=e(this,3);k&1&&(this.o=!0),k>>>=1;switch(k){case 0:var g=this.input,d=this.c,h=this.b,f=this.a,l=g.length,i=b,m=b,n=h.length,j=b;this.d=this.f=0;d+1>=l&&c(Error('invalid uncompressed block header: LEN'));i=g[d++]|g[d++]<<8;d+1>=l&&c(Error('invalid uncompressed block header: NLEN'));m=g[d++]|g[d++]<<8;i===~m&&c(Error('invalid uncompressed block header: length verify'));d+i>g.length&&c(Error('input buffer is broken'));switch(this.k){case E:for(;f+i>h.length;){if(j=n-f,i-=j,a)h.set(g.subarray(d,d+j),f),f+=j,d+=j;else for(;j--;)h[f++]=g[d++];this.a=f,h=this.e(),f=this.a}break;case t:for(;f+i>h.length;)h=this.e({t:2});break;default:c(Error('invalid inflate mode'))}if(a)h.set(g.subarray(d,d+i),f),f+=i,d+=i;else for(;i--;)h[f++]=g[d++];this.c=d;this.a=f;this.b=h;break;case 1:this.l(L,N);break;case 2:O(this);break;default:c(Error('unknown BTYPE: '+k))}}return this.q()};var D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],v=a?new Uint16Array(D):D,z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],y=a?new Uint16Array(z):z,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],q=a?new Uint8Array(C):C,A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],B=a?new Uint16Array(A):A,x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],p=a?new Uint8Array(x):x,s=new(a?Uint8Array:Array)(288),i,K;for(i=0,K=s.length;i<K;++i)s[i]=143>=i?8:255>=i?9:279>=i?7:8;var L=l(s),w=new(a?Uint8Array:Array)(30),u,I;for(u=0,I=w.length;u<I;++u)w[u]=5;var N=l(w);g.prototype.l=function(i,j){var c=this.b,a=this.a;this.r=i;for(var f=c.length-258,b,d,g,h;256!==(b=o(this,i));)if(256>b)a>=f&&(this.a=a,c=this.e(),a=this.a),c[a++]=b;else for(d=b-257,h=y[d],0<q[d]&&(h+=e(this,q[d])),b=o(this,j),g=B[b],0<p[b]&&(g+=e(this,p[b])),a>=f&&(this.a=a,c=this.e(),a=this.a);h--;)c[a]=c[a++-g];for(;8<=this.d;)this.d-=8,this.c--;this.a=a},g.prototype.D=function(i,j){var a=this.b,c=this.a;this.r=i;for(var d=a.length,b,f,h,g;256!==(b=o(this,i));)if(256>b)c>=d&&(a=this.e(),d=a.length),a[c++]=b;else for(f=b-257,g=y[f],0<q[f]&&(g+=e(this,q[f])),b=o(this,j),h=B[b],0<p[b]&&(h+=e(this,p[b])),c+g>d&&(a=this.e(),d=a.length);g--;)a[c]=a[c++-h];for(;8<=this.d;)this.d-=8,this.c--;this.a=c},g.prototype.e=function(){var d=new(a?Uint8Array:Array)(this.a-32768),e=this.a-32768,b,f,c=this.b;if(a)d.set(c.subarray(32768,d.length));else for(b=0,f=d.length;b<f;++b)d[b]=c[b+32768];if(this.i.push(d),this.n+=d.length,a)c.set(c.subarray(e,e+32768));else for(b=0;32768>b;++b)c[b]=c[e+b];return this.a=32768,c},g.prototype.F=function(c){var e,d=this.input.length/this.c+1|0,h,f,g,i=this.input,b=this.b;return c&&('number'===typeof c.t&&(d=c.t),'number'===typeof c.A&&(d+=c.A)),2>d?(h=(i.length-this.c)/this.r[2],g=258*(h/2)|0,f=g<b.length?b.length+g:b.length<<1):f=b.length*d,a?(e=new Uint8Array(f),e.set(b)):e=b,this.b=e},g.prototype.q=function(){var g=0,i=this.b,c=this.i,h,d=new(a?Uint8Array:Array)(this.n+(this.a-32768)),b,e,f,j;if(0===c.length)return a?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(b=0,e=c.length;b<e;++b)for(h=c[b],f=0,j=h.length;f<j;++f)d[g++]=h[f];for(b=32768,e=this.a;b<e;++b)d[g++]=i[b];return this.i=[],this.buffer=d},g.prototype.B=function(){var c,b=this.a;return a?this.z?(c=new Uint8Array(b),c.set(this.b.subarray(0,b))):c=this.b.subarray(0,b):(this.b.length>b&&(this.b.length=b),c=this.b),this.buffer=c},n.prototype.G=function(){return this.s||this.g(),this.m.slice()},n.prototype.g=function(){for(var x=this.input.length;this.c<x;){var f=new h,l=b,r=b,m=b,t=b,p=b,o=b,j=b,u=b,q=b,d=this.input,e=this.c;f.u=d[e++],f.v=d[e++],(31!==f.u||139!==f.v)&&c(Error('invalid file signature:'+f.u+','+f.v)),f.p=d[e++];switch(f.p){case 8:break;default:c(Error('unknown compression method: '+f.p))}if(f.h=d[e++],u=d[e++]|d[e++]<<8|d[e++]<<16|d[e++]<<24,f.I=new Date(1e3*u),f.O=d[e++],f.N=d[e++],0<(f.h&4)&&(f.J=d[e++]|d[e++]<<8,e+=f.J),0<(f.h&8)){for(j=[],o=0;0<(p=d[e++]);)j[o++]=String.fromCharCode(p);f.name=j.join('')}if(0<(f.h&16)){for(j=[],o=0;0<(p=d[e++]);)j[o++]=String.fromCharCode(p);f.K=j.join('')}0<(f.h&2)&&(f.C=G(d,0,e)&65535,f.C!==(d[e++]|d[e++]<<8)&&c(Error('invalid header crc16'))),l=d[d.length-4]|d[d.length-3]<<8|d[d.length-2]<<16|d[d.length-1]<<24,d.length-e-4-4<512*l&&(t=l),r=new g(d,{index:e,bufferSize:t}),f.data=m=r.g(),e=r.c,f.L=q=(d[e++]|d[e++]<<8|d[e++]<<16|d[e++]<<24)>>>0,G(m,b,b)!==q&&c(Error('invalid CRC-32 checksum: 0x'+G(m,b,b).toString(16)+' / 0x'+q.toString(16))),f.M=l=(d[e++]|d[e++]<<8|d[e++]<<16|d[e++]<<24)>>>0,(m.length&4294967295)!==l&&c(Error('invalid input size: '+(m.length&4294967295)+' / '+l)),this.m.push(f),this.c=e}this.s=!0;var n=this.m,i,s,w=0,v=0,k;for(i=0,s=n.length;i<s;++i)v+=n[i].data.length;if(a)for(k=new Uint8Array(v),i=0;i<s;++i)k.set(n[i].data,w),w+=n[i].data.length;else{for(k=[],i=0;i<s;++i)k[i]=n[i].data;k=Array.prototype.concat.apply([],k)}return k},j('Zlib.Gunzip',n),j('Zlib.Gunzip.prototype.decompress',n.prototype.g),j('Zlib.Gunzip.prototype.getMembers',n.prototype.G)}.call(this))},{}],24:[function(a,b,c){'use strict';b.exports=a('./lib/parse-japanese-basic')},{'./lib/parse-japanese-basic':25}],25:[function(e,f,h){'use strict';function g(a,f){function g(d,g,h){a.line=g+1,a.column=1;var b=a.createParentNode('Paragraph');if(d!==''){var f=new c(d).toWideJapneseSymbol().toString();a.add(a.createTextNode('Text',f),b)}a.add(a.createTextNode('WhiteSpace','\n'),b),a.add(b,e)}var b=f.split(d);b[b.length-1]===''&&(b=b.splice(0,b.length-1));var e=a.createParentNode('Root');return b.forEach(g),e}function b(a,c){var e=0,f=1,g=1,d;if(!(this instanceof b))return new b(a,c);a&&a.message?this.file=a:c=a,d=c&&c.position,d!==null&&d!==undefined&&(this.position=Boolean(d)),this.offset=e,this.line=f,this.column=g}var c=e('jaco').Jaco,d=/\r?\n/g,a=b.prototype;a.position=!0,a.parse=function(a){return g(this,this.file?this.file.toString():a)},a.now=function(){return{line:this.line,column:this.column,offset:this.offset}},a.next=function(b){var a=this.stringToArray(b).length;return this.offset+=a,this.column+=a,this.now()},a.createPosition=function(a){return{start:this.now(),end:this.next(a)}},a.createParentNode=function(b){var a={type:b+'Node',children:[]};return this.position&&(a.position={}),a},a.createTextNode=function(c,b){var a={type:c+'Node',value:b};return this.position&&(a.position=this.createPosition(b)),a},a.add=function(b,a){a.children.push(b),this.position&&(a.position={start:a.children[0].position.start,end:b.position.end})},a.stringToArray=function(a){return a.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]},a.useFirst=function(){throw new Error('Illegal Invocation: Unsupported `useFirst` function.')},f.exports=b},{jaco:26}],26:[function(b,a,c){(function(b){(function(){'use strict';var c=this,b;!function(a){function d(c,b){return b===void 0&&(b=!1),new a.Jaco(c).toHiragana(b).toString()}function e(c,b){return b===void 0&&(b=!0),new a.Jaco(c).toKatakana(b).toString()}function f(b){return new a.Jaco(b).isOnlyHiragana()}function g(b){return new a.Jaco(b).isOnlyKatakana()}function h(b){return b.sort(a.naturalKanaOrder)}function i(h,e){if(h===e)return 0;var j=new a.Jaco(h).toNarrow().toPhoeticKana(),l=new a.Jaco(e).toNarrow().toPhoeticKana(),f,g,k=j.toString(),i=l.toString(),r=j.removeVoicedMarks(!0).toString(),q=l.removeVoicedMarks(!0).toString(),o=b(r),p=b(q),d=0,m=Math.max(h.length,e.length),n=/[ーぁぃぅぇぉっゃゅょゎァィゥェォヵㇰヶㇱㇲッㇳㇴㇵㇶㇷㇸㇹㇺャュョㇻㇼㇽㇾㇿヮゝゞヽヾ]/;if(o<p)return-1;else if(o>p)return 1;else{for(;d<m;d++)if(n.test(h[d])||n.test(e[d])){if(f=c(h[d]),g=c(e[d]),f<g)return-1;if(f>g)return 1}else if(k[d]<i[d])return-1;else if(i[d]<k[d])return 1;for(d=0;d<m;d++){if(f=a.hiraganaOnly(h[d])?'0':'1',g=a.hiraganaOnly(e[d])?'0':'1',f<g)return-1;if(f>g)return 1}return 0}}function b(b){return new a.Jaco(b).replaceMap({あ:'ぁ',い:'あ',う:'ぃ',え:'い',お:'ぅ',か:'う',き:'ぇ',く:'え',け:'ぉ',こ:'お',さ:'か',し:'が',す:'き',せ:'ぎ',そ:'く',た:'ぐ',ち:'げ',つ:'こ',て:'ご',と:'さ',な:'ざ',に:'し',ぬ:'じ',ね:'す',の:'ず',は:'せ',ひ:'ぜ',ふ:'そ',へ:'ぞ',ほ:'た',ま:'だ',み:'ち',む:'ぢ',め:'っ',も:'つ',や:'づ',ゆ:'て',よ:'で',ら:'と',り:'ど',る:'な',れ:'に',ろ:'ぬ',わ:'ね',ゐ:'の',ゑ:'は',を:'ば',ん:'ぱ',ゝ:'ひ',ー:'び'}).toString()}function c(b){var a=b.replace('ー','0').replace(/[ぁぃぅぇぉっゃゅょゎァィゥェォヵㇰヶㇱㇲッㇳㇴㇵㇶㇷㇸㇹㇺャュョㇻㇼㇽㇾㇿヮ]/,function(a){return a.charCodeAt(0).toString(16)}).replace('ゝ','4000').replace('ヽ','4001').replace('ゞ','4002').replace('ヾ','4003').replace(/[^0-9]/,'9000');return a}a.SIGN_CHARS='\\u0020-\\u002F\\u003A-\\u0041\\u005B-\\u0061\\u007B-\\u007E',a.DIGIT_CAHRS='0-9',a.ALPHA_CHARS='A-Za-z',a.ALPHANUMERIC_CHARS_WITH_SIGN='\\u0020-\\u007E',a.FULLWIDTH_SING_CHARS='\\uFF01-\\uFF0F\\uFF1A-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF5E',a.FULLWIDTH_DIGIT_CHARS='\\uFF10-\\uFF19',a.FULLWIDTH_ALPHA_CHARS='\\uFF21-\\uFF3A\\uFF41-\\uFF5A',a.FULLWIDTH_ALPHANUMERIC_CHARS_WITH_SIGN='\\uFF01-\\uFF5F',a.HIRAGANA_CHARS='\\u3041-\\u3096\\u309D-\\u309F',a.HIRAGANA_CHARS_IGNORE_ITERATION_MARKS='\\u3041-\\u3096',a.KATAKANA_CHARS='\\u30A1-\\u30FA\\u30FD\\u30FF',a.KATAKANA_CHARS_IGNORE_ITERATION_MARKS='\\u30A1-\\u30FA',a.KANA_COMMON_CAHRS='゙-゜ー',a.JAPANESE_SIGN_CHARS='　-〶・\\uFF5E',a.NARROW_KATAKANA_CHARS='\\uFF66-\\uFF9F',a.NARROW_JAPANESE_SIGN_CHARS='\\uFF61-\\uFF65',a.SPACE_CHARS='\\s\\n\\t\\u0009\\u0020\\u00A0\\u2002-\\u200B\\u3000\\uFEFF',a.hiraganize=d,a.katakanize=e,a.hiraganaOnly=f,a.katakanaOnly=g,a.naturalKanaSort=h,a.naturalKanaOrder=i}(b||(b={}));var b;!function(a,c){function b(a){return new RegExp('['+a+']','g')}function d(b,a){return a===void 0&&(a='igm'),new RegExp(b,a)}c=function(){function c(a){if(!(this instanceof c))return new c(a);this._str=a.toString()}return c.prototype.toString=function(){return this._str},c.prototype.valueOf=function(){return this.toString()},c.prototype.concat=function(){var b=[];for(var a=0;a<arguments.length;a++)b[a-0]=arguments[a];return this._str+=b.join(''),this},c.prototype.replace=function(a,b){return this._str=this._str.replace(a,b),this},c.prototype.slice=function(a,b){return new c(this._str.slice(a,b))},c.prototype.substr=function(a,b){return new c(this._str.slice(a,b))},c.prototype.substring=function(a,b){return new c(this._str.substring(a,b))},c.prototype.toLowerCase=function(){return this._str=this._str.toLowerCase(),this},c.prototype.toUpperCase=function(){return this._str=this._str.toUpperCase(),this},c.prototype.remove=function(a){return this.replace(a,'')},c.prototype.trim=function(){return this.remove(/^\s*|\s*$/g)},c.prototype.size=function(){return this._str.length},c.prototype.byteSize=function(){return encodeURIComponent(this._str).replace(/%../g,'x').length},c.prototype.isEmpty=function(){return this._str===''},c.prototype.clone=function(){return new c(this._str)},c.prototype.test=function(a){var b;return typeof a==='string'?b=this._str===a:b=a.test(this._str),b},c.prototype.prepend=function(a){return this._str=new c(a).concat(this).toString(),this},c.prototype.append=function(a){return this.concat(a)},c.prototype.is=function(a){return this._str===a.toString()},c.prototype.has=function(a){return this._str.indexOf(a.toString())!==-1},c.prototype.isOnly=function(a){return this.test(new RegExp('^['+a+']+$','gm'))},c.prototype.isOnlyHiragana=function(){return this.isOnly(a.HIRAGANA_CHARS+a.KANA_COMMON_CAHRS)},c.prototype.isOnlyKatakana=function(){return this.isOnly(a.KATAKANA_CHARS+a.KANA_COMMON_CAHRS)},c.prototype.isNumeric=function(b,c){b===void 0&&(b=!0),c===void 0&&(c=!0);var a='^';return b&&(a+='-?'),c&&(a+='(?:[0-9]*\\.)?'),a+='[0-9]+$',this.test(d(a))},c.prototype.toNumber=function(){return parseFloat(this._str)},c.prototype.toNumeric=function(a,b){return a===void 0&&(a=!1),b===void 0&&(b=!1),this.toNarrow(),this.remove(/[^0-9\.\-]/gm),a&&this.replace(/^-/,'n'),this.remove(/-/g),a&&this.replace('n','-'),b&&this.replace(/\.([0-9])/,'_$1'),this.remove(/\./g),b&&this.replace('_','.'),this},c.prototype.combinate=function(){return this.replaceMap({'゛':'゙','゜':'゚'})},c.prototype.combinateSoundMarks=function(a){return a===void 0&&(a=!1),a?this.replaceMap({'゛':'゙','゜':'゚'}):(this.combinateSoundMarks(!0),this.replaceMap({が:'が',ぎ:'ぎ',ぐ:'ぐ',げ:'げ',ご:'ご',ざ:'ざ',じ:'じ',ず:'ず',ぜ:'ぜ',ぞ:'ぞ',だ:'だ',ぢ:'ぢ',づ:'づ',で:'で',ど:'ど',ば:'ば',び:'び',ぶ:'ぶ',べ:'べ',ぼ:'ぼ',ガ:'ガ',ギ:'ギ',グ:'グ',ゲ:'ゲ',ゴ:'ゴ',ザ:'ザ',ジ:'ジ',ズ:'ズ',ゼ:'ゼ',ゾ:'ゾ',ダ:'ダ',ヂ:'ヂ',ヅ:'ヅ',デ:'デ',ド:'ド',バ:'バ',ビ:'ビ',ブ:'ブ',ベ:'ベ',ボ:'ボ',ヷ:'ヷ',イ゙:'ヸ',ヴ:'ヴ',エ゙:'ヹ',ヺ゙:'ヲ',ゞ:'ゞ',ヾ:'ヾ',ぱ:'ぱ',ぴ:'ぴ',ぷ:'ぷ',ぺ:'ぺ',ぽ:'ぽ',パ:'パ',ピ:'ピ',プ:'プ',ペ:'ペ',ポ:'ポ'}))},c.prototype.toHiragana=function(c){return c===void 0&&(c=!1),this.toWideKatakana(),this.replaceMap({ヷ:'わ゛',ヸ:'ゐ゛',ヹ:'ゑ゛',ヺ:'を゛'}),this._shift(b(a.KATAKANA_CHARS),-96),c&&this.combinateSoundMarks(),this},c.prototype.toKatakana=function(c){return c===void 0&&(c=!0),c&&this.toWideKatakana(),this.replace(/\u308F(?:\u309B|\u3099|\uFF9E)/g,'ヷ'),this.replace(/\u3090(?:\u309B|\u3099|\uFF9E)/g,'ヸ'),this.replace(/\u3091(?:\u309B|\u3099|\uFF9E)/g,'ヹ'),this.replace(/\u3092(?:\u309B|\u3099|\uFF9E)/g,'ヺ'),this._shift(b(a.HIRAGANA_CHARS),96),this},c.prototype.toNarrowKatakana=function(a){return a===void 0&&(a=!1),a&&this.toKatakana(),this.replace(/\u309B|\u3099/g,'ﾞ'),this.replace(/\u309C|\u309A/g,'ﾟ'),this.replaceMap({ァ:'ｧ',ィ:'ｨ',ゥ:'ｩ',ェ:'ｪ',ォ:'ｫ',ャ:'ｬ',ュ:'ｭ',ョ:'ｮ',ッ:'ｯ',ヵ:'ｶ',ヶ:'ｹ',ヮ:'ﾜ',ー:'ｰ',ア:'ｱ',イ:'ｲ',ウ:'ｳ',エ:'ｴ',オ:'ｵ',カ:'ｶ',キ:'ｷ',ク:'ｸ',ケ:'ｹ',コ:'ｺ',サ:'ｻ',シ:'ｼ',ス:'ｽ',セ:'ｾ',ソ:'ｿ',タ:'ﾀ',チ:'ﾁ',ツ:'ﾂ',テ:'ﾃ',ト:'ﾄ',ナ:'ﾅ',ニ:'ﾆ',ヌ:'ﾇ',ネ:'ﾈ',ノ:'ﾉ',ハ:'ﾊ',ヒ:'ﾋ',フ:'ﾌ',ヘ:'ﾍ',ホ:'ﾎ',マ:'ﾏ',ミ:'ﾐ',ム:'ﾑ',メ:'ﾒ',モ:'ﾓ',ヤ:'ﾔ',ユ:'ﾕ',ヨ:'ﾖ',ラ:'ﾗ',リ:'ﾘ',ル:'ﾙ',レ:'ﾚ',ロ:'ﾛ',ワ:'ﾜ',ン:'ﾝ',ヰ:'ｲ',ヱ:'ｴ',ヲ:'ｦ',ガ:'ｶﾞ',ギ:'ｷﾞ',グ:'ｸﾞ',ゲ:'ｹﾞ',ゴ:'ｺﾞ',ザ:'ｻﾞ',ジ:'ｼﾞ',ズ:'ｽﾞ',ゼ:'ｾﾞ',ゾ:'ｿﾞ',ダ:'ﾀﾞ',ヂ:'ﾁﾞ',ヅ:'ﾂﾞ',デ:'ﾃﾞ',ド:'ﾄﾞ',バ:'ﾊﾞ',ビ:'ﾋﾞ',ブ:'ﾌﾞ',ベ:'ﾍﾞ',ボ:'ﾎﾞ',パ:'ﾊﾟ',ピ:'ﾋﾟ',プ:'ﾌﾟ',ペ:'ﾍﾟ',ポ:'ﾎﾟ',ヷ:'ﾜﾞ',ヸ:'ｲﾞ',ヴ:'ｳﾞ',ヹ:'ｴﾞ',ヺ:'ｦﾞ'}),this},c.prototype.toWideKatakana=function(){return this.replaceMap({ｶﾞ:'ガ',ｷﾞ:'ギ',ｸﾞ:'グ',ｹﾞ:'ゲ',ｺﾞ:'ゴ',ｻﾞ:'ザ',ｼﾞ:'ジ',ｽﾞ:'ズ',ｾﾞ:'ゼ',ｿﾞ:'ゾ',ﾀﾞ:'ダ',ﾁﾞ:'ヂ',ﾂﾞ:'ヅ',ﾃﾞ:'デ',ﾄﾞ:'ド',ﾊﾞ:'バ',ﾋﾞ:'ビ',ﾌﾞ:'ブ',ﾍﾞ:'ベ',ﾎﾞ:'ボ',ﾊﾟ:'パ',ﾋﾟ:'ピ',ﾌﾟ:'プ',ﾍﾟ:'ペ',ﾎﾟ:'ポ',ﾜﾞ:'ヷ',ｲﾞ:'ヸ',ｳﾞ:'ヴ',ｴﾞ:'ヹ',ｦﾞ:'ヺ',ﾞ:'゛',ﾟ:'゜',ｧ:'ァ',ｨ:'ィ',ｩ:'ゥ',ｪ:'ェ',ｫ:'ォ',ｬ:'ャ',ｭ:'ュ',ｮ:'ョ',ｯ:'ッ',ｰ:'ー',ｱ:'ア',ｲ:'イ',ｳ:'ウ',ｴ:'エ',ｵ:'オ',ｶ:'カ',ｷ:'キ',ｸ:'ク',ｹ:'ケ',ｺ:'コ',ｻ:'サ',ｼ:'シ',ｽ:'ス',ｾ:'セ',ｿ:'ソ',ﾀ:'タ',ﾁ:'チ',ﾂ:'ツ',ﾃ:'テ',ﾄ:'ト',ﾅ:'ナ',ﾆ:'ニ',ﾇ:'ヌ',ﾈ:'ネ',ﾉ:'ノ',ﾊ:'ハ',ﾋ:'ヒ',ﾌ:'フ',ﾍ:'ヘ',ﾎ:'ホ',ﾏ:'マ',ﾐ:'ミ',ﾑ:'ム',ﾒ:'メ',ﾓ:'モ',ﾔ:'ヤ',ﾕ:'ユ',ﾖ:'ヨ',ﾗ:'ラ',ﾘ:'リ',ﾙ:'ル',ﾚ:'レ',ﾛ:'ロ',ﾜ:'ワ',ｦ:'ヲ',ﾝ:'ン'}),this},c.prototype.toNarrowJapneseSymbol=function(){return this.replaceMap({'。':'｡','（':'(','）':')','「':'｢','」':'｣','、':'､','・':'･'}),this},c.prototype.toWideJapneseSymbol=function(){return this.replaceMap({'｡':'。','\\(':'（','\\)':'）','｢':'「','｣':'」','､':'、','･':'・'}),this},c.prototype.toNarrowJapnese=function(){return this.toNarrowKatakana(),this.toNarrowJapneseSymbol(),this},c.prototype.toWideJapnese=function(){return this.toWideKatakana(),this.toWideJapneseSymbol(),this},c.prototype.toNarrow=function(c){return c===void 0&&(c=!1),this.replace(b(a.SPACE_CHARS),' '),this._shift(b(a.FULLWIDTH_ALPHANUMERIC_CHARS_WITH_SIGN),-65248),c&&this.toNarrowJapnese(),this},c.prototype.toWide=function(){return this.replace(' ','　'),this.toWideJapnese(),this._shift(b(a.ALPHANUMERIC_CHARS_WITH_SIGN),65248),this},c.prototype.addVoicedMarks=function(){return this.remove(/\u309B|\u3099|\uFF9E/g),this.remove(/\u309C|\u309A|\uFF9F/g),this.replaceMap({か:'が',き:'ぎ',く:'ぐ',け:'げ',こ:'ご',さ:'ざ',し:'じ',す:'ず',せ:'ぜ',そ:'ぞ',た:'だ',ち:'ぢ',つ:'づ',て:'で',と:'ど',は:'ば',ひ:'び',ふ:'ぶ',へ:'べ',ほ:'ぼ',カ:'ガ',キ:'ギ',ク:'グ',ケ:'ゲ',コ:'ゴ',サ:'ザ',シ:'ジ',ス:'ズ',セ:'ゼ',ソ:'ゾ',タ:'ダ',チ:'ヂ',ツ:'ヅ',テ:'デ',ト:'ド',ハ:'バ',ヒ:'ビ',フ:'ブ',ヘ:'ベ',ホ:'ボ',ワ:'ヷ',イ:'ヸ',ウ:'ヴ',エ:'ヹ',ヺ:'ヲ',ゝ:'ゞ',ヽ:'ヾ'})},c.prototype.addSemivoicedMarks=function(){return this.replaceMap({は:'ぱ',ひ:'ぴ',ふ:'ぷ',へ:'ぺ',ほ:'ぽ',ハ:'パ',ヒ:'ピ',フ:'プ',ヘ:'ペ',ホ:'ポ'})},c.prototype.removeVoicedMarks=function(a){return a===void 0&&(a=!1),a||(this.remove(/\u309B|\u3099|\uFF9E/g),this.remove(/\u309C|\u309A|\uFF9F/g)),this.replaceMap({が:'か',ぎ:'き',ぐ:'く',げ:'け',ご:'こ',ざ:'さ',じ:'し',ず:'す',ぜ:'せ',ぞ:'そ',だ:'た',ぢ:'ち',づ:'つ',で:'て',ど:'と',ば:'は',び:'ひ',ぶ:'ふ',べ:'へ',ぼ:'ほ',ぱ:'は',ぴ:'ひ',ぷ:'ふ',ぺ:'へ',ぽ:'ほ',ガ:'カ',ギ:'キ',グ:'ク',ゲ:'ケ',ゴ:'コ',ザ:'サ',ジ:'シ',ズ:'ス',ゼ:'セ',ゾ:'ソ',ダ:'タ',ヂ:'チ',ヅ:'ツ',デ:'テ',ド:'ト',バ:'ハ',ビ:'ヒ',ブ:'フ',ベ:'ヘ',ボ:'ホ',パ:'ハ',ピ:'ヒ',プ:'フ',ペ:'ヘ',ポ:'ホ',ヷ:'ワ',ヸ:'イ',ヴ:'ウ',ヹ:'エ',ヺ:'ヲ',ゞ:'ゝ',ヾ:'ヽ'})},c.prototype.convertProlongedSoundMarks=function(){var c=new RegExp('['+a.HIRAGANA_CHARS+a.KATAKANA_CHARS+']ー'),b=this._str,d=function(a){return a=a.replace(/([あぁかゕがさざただなはばぱまやゃらわゎ])ー/g,'$1あ').replace(/([いぃきぎしじちぢにひびぴみりゐ])ー/g,'$1い').replace(/([うぅゔくぐすずつづぬふぶぷむゆゅる])ー/g,'$1う').replace(/([えぇけゖげせぜてでねへべぺめれゑ])ー/g,'$1え').replace(/([おぉこごそぞとどのほぼぽもよょろを])ー/g,'$1お').replace(/んー/g,'んん').replace(/っー/g,'っっ').replace(/([アァカヵガサザタダナハバパマヤャラワヮヷ])ー/g,'$1ア').replace(/([イィキギシジチヂニヒビピミリヰヸ])ー/g,'$1イ').replace(/([ウゥヴクグスズツヅヌフブプムユュル])ー/g,'$1ウ').replace(/([エェケヶゲセゼテデネヘベペメレヱヹ])ー/g,'$1エ').replace(/([オォコゴソゾトドノホボポモヨョロヲヺ])ー/g,'$1オ').replace(/ンー/g,'ンン').replace(/ッー/g,'ッッ'),a};while(c.test(b))b=d(b);return this._str=b,this},c.prototype.convertIterationMarks=function(){var b=new RegExp('(['+a.HIRAGANA_CHARS_IGNORE_ITERATION_MARKS+a.KATAKANA_CHARS_IGNORE_ITERATION_MARKS+'])([ゝゞヽヾ])'),c=function(c){return c.replace(b,function(g,c,f){var d=c,b=new a.Jaco(c).removeVoicedMarks(),e=f;switch(e){case'ゝ':{b.toHiragana();break}case'ヽ':{b.toKatakana();break}case'ゞ':{b.toHiragana().addVoicedMarks();break}case'ヾ':{b.toKatakana().addVoicedMarks();break}}return d+b})};while(b.test(this._str))this._str=c(this._str);return this},c.prototype.toBasicLetter=function(){return this.combinateSoundMarks().replaceMap({ぁ:'あ',ぃ:'い',ぅ:'う',ぇ:'え',ぉ:'お',っ:'つ',ゃ:'や',ゅ:'ゆ',ょ:'よ',ゎ:'わ',ァ:'ア',ィ:'イ',ゥ:'ウ',ェ:'エ',ォ:'オ',ヵ:'カ',ㇰ:'ク',ヶ:'ケ',ㇱ:'シ',ㇲ:'ス',ッ:'ツ',ㇳ:'ト',ㇴ:'ヌ',ㇵ:'ハ',ㇶ:'ヒ',ㇷ:'フ',ㇸ:'ヘ',ㇹ:'ホ',ㇺ:'ム',ャ:'ヤ',ュ:'ユ',ョ:'ヨ',ㇻ:'ラ',ㇼ:'リ',ㇽ:'ル',ㇾ:'レ',ㇿ:'ロ',ヮ:'ワ'}),this},c.prototype.hasSmallLetter=function(){return/[ぁぃぅぇぉっゃゅょゎァィゥェォヵㇰヶㇱㇲッㇳㇴㇵㇶㇷㇸㇹㇺャュョㇻㇼㇽㇾㇿヮ]/.test(this._str)},c.prototype.toPhoeticKana=function(){return this.toHiragana().toBasicLetter().convertProlongedSoundMarks().convertIterationMarks(),this},c.prototype.replaceMap=function(b){var a,c;for(a in b)b.hasOwnProperty(a)&&(c=b[a],this._str=this._str.replace(d(a),c));return this},c.prototype._shift=function(a,b){return this._str=this._str.replace(a,function(a){return String.fromCharCode(a.charCodeAt(0)+b)}),this},c}(),a.Jaco=c}(b||(b={})),'process'in c?a.exports=b:c.jaco=b}.call((this||0).self||b))}.call(this,typeof global!=='undefined'?global:typeof self!=='undefined'?self:typeof window!=='undefined'?window:{}))},{}],27:[function(e,a,f){'use strict';function b(b,d){var a=-1,c=b.length;while(++a<c)if(d(b[a],a)===!1)return!1;return!0}function c(b,d){var a=b.length,c=-1;while(--a>c)if(d(b[a],a)===!1)return!1;return!0}function d(i,a,d,f){var g,e,h;typeof a==='function'&&(f=d,d=a,a=null),g=f?c:b,h=function(a,b){return g(a,function(a,c){return a&&e(a,c,b)})},e=function(b,c,f){var e;return c=c||(f?0:null),(!a||b.type===a)&&(e=d(b,c,f||null)),b.children&&e!==!1?h(b.children,b):e},e(i)}a.exports=d},{}]},{},[1])(1)})
